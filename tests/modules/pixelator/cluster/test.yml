- name: pixelator_cluster test_pixelator_cluster
  command: nextflow -C tests/modules/pixelator/cluster/nextflow.config run tests/modules/pixelator/cluster -entry test_pixelator_cluster
  tags:
    - pixelator
    - pixelator-cluster

  files:
    - path: output/pixelator/test_data.pixelator-cluster.log
      contains:
        - "Finished pixelator cluster"
    - path: output/pixelator/cluster/data_summary.png
    - path: output/pixelator/cluster/test_data.anndata.h5ad
    - path: output/pixelator/cluster/test_data.antibody_metrics.csv
    - path: output/pixelator/cluster/test_data.antibody_metrics.png
    - path: output/pixelator/cluster/test_data.components_antibody.csv
    - path: output/pixelator/cluster/test_data.components_dist.png
    - path: output/pixelator/cluster/test_data.components_metrics.csv
    - path: output/pixelator/cluster/test_data.components_recovered.csv
    - path: output/pixelator/cluster/test_data.filtered_anndata.h5ad
    - path: output/pixelator/cluster/test_data.filtered_antibody_metrics.csv
    - path: output/pixelator/cluster/test_data.filtered_antibody_metrics.png
    - path: output/pixelator/cluster/test_data.filtered_components_antibody.csv
    - path: output/pixelator/cluster/test_data.filtered_components_dist.png
    - path: output/pixelator/cluster/test_data.filtered_components_metrics.csv
    - path: output/pixelator/cluster/test_data.filtered_pixel_data.csv
    - path: output/pixelator/cluster/test_data.pixel_data.csv
    - path: output/pixelator/cluster/test_data.report.json
